#!/usr/bin/env zsh
# Get a Kitty tab ID
# Usage: kitty-tab-id           # Get current tab ID
#        kitty-tab-id "TabName"  # Get tab ID by name

local tabName="$1"
local kittyLs=$(kitty@ ls)

# No argument: get current tab ID
if [[ "$tabName" == "" ]]; then
  echo "$kittyLs" | jq -r ".[0].tabs[] | select(.windows[].id==${KITTY_WINDOW_ID}) | .id"
  exit 0
fi

# Argument provided: get tab ID by name
echo "$kittyLs" | jq -r --arg name "$tabName" '.[0].tabs[] | select(.title==$name) | .id'
