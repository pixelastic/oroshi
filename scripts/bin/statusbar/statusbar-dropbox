#!/usr/bin/env zsh
# JSON info about if dropbox is running

source ~/.oroshi/config/zsh/theming/env/colors.zsh

function dropbox-is-running() {
	[[ ! $commands[dropbox] ]] && return 1
	dropbox status 2>/dev/null |
		grep \
			--quiet \
			"Dropbox isn't running\!\|Syncing paused" &&
		return 1 ||
		return 0
}

local fg=$COLOR_ALIAS_COMMENT
dropbox-is-running || fg=$COLOR_ALIAS_ERROR

jq -n \
	--arg text "ï…« " \
	--arg fg $fg \
	'$ARGS.named | [.]'
