#!/usr/bin/env zsh
# Display a list of all the linked yarn modules
# Usage:
# $ yarn-link-list    # Display list of all locally linked yarn modules

# Stop if yarn isn't installed
[[ ! $commands[yarn] ]] && exit 1

local linkedModules="$(yarn-link-list-raw)"

for module in ${(f)linkedModules}; do
  local split=(${(s/:/)module})
  local moduleName=$split[1]
  local moduleLinkType=$split[2]
  local RESET="\e[0m"


  [[ $moduleLinkType = 'local' ]] && echo "\e[38;5;${COLOR_YELLOW}m  $moduleName\e[0m"
  [[ $moduleLinkType = 'global' ]] && echo "\e[38;5;${COLOR_BLUE_7}m  $moduleName\e[0m"
done

exit 0
