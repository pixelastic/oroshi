#!/usr/bin/env zsh
# Returns the specific options required to pass to fzf
# Using fzf inside of vim requires to pass the options as their own input, which
# is why we need to externalize this file.
#
# Zsh will use one argument per line, while vim will require them separated by
# spaces.
#
# Usage:
# $ fzf-directories-search-options /path/to/directory       # For zsh
# $ fzf-directories-search-options /path/to/directory --vim # For vim

# Parse arguments {{{
zmodload zsh/zutil
zparseopts -E -D \
  -vim=vimFlag

local directory="$1"
local isForVim=${#vimFlag}
# }}}

local fzfOptions=()
fzfOptions+="--color=fg:$COLOR_ALIAS_DIRECTORY"
fzfOptions+="--color=fg+:$COLOR_ALIAS_DIRECTORY"
if [[ $isForVim == "1" ]]; then
  fzfOptions+="--preview='fzf-directories-search-preview ${directory}{}'"
else
  fzfOptions+="--preview=fzf-directories-search-preview ${directory}{}"
fi

# One per line, or separated by space.
for fzfOption in $fzfOptions; do
  if [[ $isForVim == "1" ]]; then
    echo -n "$fzfOption "
  else
    echo $fzfOption
  fi
done
