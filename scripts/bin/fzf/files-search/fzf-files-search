#!/usr/bin/env zsh
# Fuzzy finding into all files of a given directory
# Usage:
# $ fzf-files-search fzf-files-search-***-source /path/to/directory

local sourceBinary="$1"
local directory="$2"

# The options to pass to fzf
local fzfOptions="$(fzf-files-search-options $directory)"

# Actual fzf selection
local rawSelection="$($sourceBinary | fzf ${(f)fzfOptions})"

# Parsing the selection to extract only relevant information
local selection="$(fzf-files-search-postprocess "$rawSelection" $directory)"

echo $selection
