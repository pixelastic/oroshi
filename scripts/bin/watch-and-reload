#!/usr/bin/env zsh
# Watch for changes in files and run specific command when they change
# Usage:
#   $ watch-and-reload ./file1.txt ./file2.txt 'something && ls'
local filesToWatch=(${(@)@[1,-2]})
local commandToRun=$@[-1]

# If no command specified, we run the changed file
[[ $commandToRun == "" ]] && commandToRun="/_"

# -c: Clear the screen
# -s: Run command using the shell
ls $filesToWatch \
  | entr -c -s "$commandToRun"
