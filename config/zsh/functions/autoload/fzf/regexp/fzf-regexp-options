# Returns the specific options required to pass to fzf for a regexp search
# inside of files.
# Is usually prepended to all fzf-regexp specific searches
# Usage:
# $ fzf-regexp-options
# --source         # Mandatory, list of suggestions
function fzf-regexp-options() {

	zmodload zsh/zutil
	zparseopts -E -D \
		-source:=flagSource

	local fzfSourcePath=${flagSource[2]}

	echo "--disabled"
	echo "--delimiter=   "
	echo "--with-nth=3"

	# Keybindings
	# Update the results on each keystroke, but as it's intensive, wait a bit
	echo "--bind=change:reload:sleep 0.3;${fzfSourcePath} {q} || true"
	# => [F1] toggle single/multi results
	echo "--bind=f1:execute-silent(fzf-regexp-fold-toggle)"
	echo "--bind=f1:+reload(${fzfSourcePath} {q})"
	# TODO: I should create a fzf-regexp-subdir-prompt and
	# fzf-regexp-project-prompt script, pass them as arguments like the --source
	# and use them here, because prompts for each are slightly differet
	echo "--bind=f1:+transform-prompt(fzf-regexp-prompt)"
	echo "--bind=f1:+first"

	# Color the UI in regexp color
	echo "--color=disabled:${COLOR_ALIAS_REGEXP}:regular"
	echo "--color=separator:${COLOR_ALIAS_REGEXP}"
	echo "--color=info:${COLOR_ALIAS_REGEXP}"
}
