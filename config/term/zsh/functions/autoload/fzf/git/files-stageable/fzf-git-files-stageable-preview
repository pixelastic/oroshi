# Show the diff of a file between the previous revision and the current state
function fzf-git-files-stageable-preview() {
  local gitRoot="$(git-directory-root)"
  local filepath="${gitRoot}/$1"

  local diff="$(git diff HEAD --color=always -- $filepath)"

  # No diff, it's a new file
  if [[ "$diff" == "" ]]; then
    fzf-fs-shared-preview $filepath
    return
  fi

  # Display the diff
  img-display --clear
  fzf-fs-shared-preview-header "$filepath"
  echo $diff
}
