# Add a secret to a Fly.io application
# Usage:
# $ fly-secret-add KEY value         # Add secret to current app
# $ fly-secret-add KEY value myapp   # Add secret to specific app
function fly-secret-create() {
  local secretKey="$1"
  local secretValue="$2"
  local appName="$3"

  local commandFlag=""
  if [[ -n "$appName" ]]; then
    commandFlag="--app $appName"
  else
    local flyConfig="$(fly-config-path)"
    [[ -z $flyConfig ]] && return 1
    commandFlag="--config $flyConfig"
  fi

  fly secrets set "${secretKey}=${secretValue}" ${=commandFlag}
}
